generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         Int        @id @default(autoincrement())
  uid        String     @unique @db.VarChar(255)
  name       String     @unique @db.VarChar(100)
  email      String     @unique @db.VarChar(100)
  createdAt  DateTime   @default(now()) @map("created_at")
  lastLogin  DateTime?  @map("last_login")
  role       String     @default("user") @db.VarChar(10)
  isBlocked  Boolean    @default(false) @map("is_blocked")

  templates  Template[]

  @@map("users")
}

model Template {
  id   Int     @id @default(autoincrement())
  title String
  description String?
  imageUrl String? @map("image_url")
  userId  Int
  topic   String
  tags    String[]

  // single-line string questions
  customString1State    Boolean @default(true)
  customString1Question String?  @map("custom_string1_question")
  customString2State    Boolean @default(true)
  customString2Question String?  @map("custom_string2_question")
  customString3State    Boolean @default(true)
  customString3Question String?  @map("custom_string3_question")
  customString4State    Boolean @default(true)
  customString4Question String?  @map("custom_string4_question")

  // integer questions
  customInt1State       Boolean @default(true)
  customInt1Question    String?  @map("custom_int1_question")
  customInt2State       Boolean @default(true)
  customInt2Question    String?  @map("custom_int2_question")
  customInt3State       Boolean @default(true)
  customInt3Question    String?  @map("custom_int3_question")
  customInt4State       Boolean @default(true)
  customInt4Question    String?  @map("custom_int4_question")

  // checkbox questions and options
  customCheckbox1State    Boolean @default(true)
  customCheckbox1Question String?  @map("custom_checkbox1_question")
  customCheckbox1Option1  String?
  customCheckbox1Option2  String?
  customCheckbox1Option3  String?
  customCheckbox1Option4  String?

  customCheckbox2State    Boolean @default(true)
  customCheckbox2Question String?  @map("custom_checkbox2_question")
  customCheckbox2Option1  String?
  customCheckbox2Option2  String?
  customCheckbox2Option3  String?
  customCheckbox2Option4  String?

  customCheckbox3State    Boolean @default(true)
  customCheckbox3Question String?  @map("custom_checkbox3_question")
  customCheckbox3Option1  String?
  customCheckbox3Option2  String?
  customCheckbox3Option3  String?
  customCheckbox3Option4  String?

  customCheckbox4State    Boolean @default(true)
  customCheckbox4Question String?  @map("custom_checkbox4_question")
  customCheckbox4Option1  String?
  customCheckbox4Option2  String?
  customCheckbox4Option3  String?
  customCheckbox4Option4  String?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  user User @relation(fields: [userId], references: [id])

  @@map("templates")
}

